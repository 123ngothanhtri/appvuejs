var S=Object.defineProperty,D=Object.defineProperties;var V=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var g=(s,e,n)=>e in s?S(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n,c=(s,e)=>{for(var n in e||(e={}))q.call(e,n)&&g(s,n,e[n]);if(h)for(var n of h(e))I.call(e,n)&&g(s,n,e[n]);return s},b=(s,e)=>D(s,V(e));import{_ as M,d,s as U}from"./index.ad1dc824.js";import{q as N,W as A,m as _,I as E,T as B,C as y,k as w,D as R,u as T,l as j,E as F,S as z,H,r as L,o as r,c as m,a as t,z as u,A as p,y as v,F as x,n as W,p as O,t as f,b as Y,w as G,d as J}from"./vendor.51f5342a.js";const K={data(){return{form:{name:"",age:""},formUpdate:{id:"",name:"",age:""},isShow:!1,users:[],fileImage:null}},methods:{async index(){const s=N(_(d,"users"),A("timestamp","desc"));await E(s,e=>{this.users=e.docs.map(n=>b(c({},n.data()),{id:n.id}))})},async deleteUser(s,e){await B(y(d,"users",s));const n=w(U,e);R(n).then(()=>{console.log("x\xF3a th\xE0nh c\xF4ng")}).catch(l=>{console.log(l)})},async addUser(){let s=new Date,e=s.getDate()+"/"+(s.getMonth()+1)+"/"+s.getFullYear()+" "+s.getHours()+":"+s.getMinutes(),n=Date.now()+this.fileImage.name,l=w(U,n);T(l,this.fileImage).then(()=>{j(l).then(o=>{F(_(d,"users"),{name:this.form.name,age:this.form.age,date:e,url:o,image:n,timestamp:z()}),this.form.name="",this.form.age=""})})},async editUser(s){this.isShow=!1;const e=y(d,"users",s);await H(e,{name:this.formUpdate.name,age:this.formUpdate.age})},showModal(s,e,n){this.isShow=!0,this.formUpdate.id=s,this.formUpdate.name=e,this.formUpdate.age=n}},created(){this.index()}},P=t("button",{type:"submit"},"Add",-1),Q={class:"table table-sm table-bordered"},X=t("thead",null,[t("tr",null,[t("th",null,"image"),t("th",null,"Name"),t("th",null,"Age"),t("th",null,"Date"),t("th",null,"Action")])],-1),Z=["src"],$=["onClick"],ee=["onClick"],te=J("Edit"),se={key:0,id:"sss"},ae=t("button",{type:"submit",class:"mt-3"},"Save",-1);function ne(s,e,n,l,o,i){const k=L("router-link");return r(),m(x,null,[t("form",{onSubmit:e[3]||(e[3]=v(a=>i.addUser(),["prevent"])),class:"my-2"},[u(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>o.form.name=a),placeholder:"Name",required:"",class:"d-block mb-1"},null,512),[[p,o.form.name]]),u(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=a=>o.form.age=a),placeholder:"Age",required:"",class:"d-block mb-1"},null,512),[[p,o.form.age]]),t("input",{type:"file",onChange:e[2]||(e[2]=a=>{o.fileImage=a.target.files[0]})},null,32),P],32),t("table",Q,[X,t("tbody",null,[(r(!0),m(x,null,W(o.users,a=>(r(),m("tr",{key:a.id},[t("td",null,[t("img",{src:a.url,alt:"",style:{height:"100px"}},null,8,Z)]),t("td",null,f(a.name),1),t("td",null,f(a.age),1),t("td",null,f(a.date),1),t("td",null,[t("button",{onClick:C=>i.deleteUser(a.id,a.image)},"Delete",8,$),t("button",{onClick:C=>i.showModal(a.id,a.name,a.age)},"Edit",8,ee),Y(k,{to:{name:"edit",params:{id:a.id}}},{default:G(()=>[te]),_:2},1032,["to"])])]))),128))])]),o.isShow==!0?(r(),m("div",se,[t("form",{onSubmit:e[7]||(e[7]=v(a=>i.editUser(o.formUpdate.id),["prevent"])),id:"zxc",class:"bg-warning p-3"},[u(t("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=a=>o.formUpdate.name=a),class:"d-block mb-1",required:""},null,512),[[p,o.formUpdate.name]]),u(t("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=a=>o.formUpdate.age=a),class:"d-block mb-1",required:""},null,512),[[p,o.formUpdate.age]]),ae,t("button",{onClick:e[6]||(e[6]=a=>o.isShow=!1)},"Cancel")],32)])):O("",!0)],64)}var de=M(K,[["render",ne]]);export{de as default};
