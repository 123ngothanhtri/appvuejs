var D=Object.defineProperty,B=Object.defineProperties;var C=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var h=(o,e,s)=>e in o?D(o,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[e]=s,f=(o,e)=>{for(var s in e||(e={}))T.call(e,s)&&h(o,s,e[s]);if(p)for(var s of p(e))U.call(e,s)&&h(o,s,e[s]);return o},_=(o,e)=>B(o,C(e));import{_ as S,d as c,s as g}from"./index.ad1dc824.js";import{q as V,W as q,m as b,I,u as R,l as y,E as j,S as A,k as x,J as E,T as F,C as L,D as P,o as i,c as r,a as t,z as N,A as w,p as M,y as W,F as k,n as z,d,t as m}from"./vendor.51f5342a.js";const J={data(){return{products:[],form:{name:"",description:"",fileName:""},d:!0}},methods:{async index(){const o=V(b(c,"product"),q("timestamp","desc"));await I(o,e=>{this.products=e.docs.map(s=>_(f({},s.data()),{id:s.id})),this.d=!1})},async add(){this.d=!0;let o=Date.now()+this.form.fileName.name;R(e,this.form.fileName).then(()=>{y(e).then(a=>{j(b(c,"product"),{name:this.form.name,description:this.form.description,url:a,fileName:o,timestamp:A()}),this.form.name="",this.form.description=""})});const e=x(g,o),s=E(e,this.form.fileName);s.on("state_changed",a=>{const l=a.bytesTransferred/a.totalBytes*100;switch(console.log("Upload is "+l+"% done"),a.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running");break}},a=>{switch(a.code){}},()=>{y(s.snapshot.ref).then(a=>{console.log("File available at",a)})})},async deleteProduct(o,e){await F(L(c,"product",o));const s=x(g,e);await P(s).then(()=>{console.log("x\xF3a th\xE0nh c\xF4ng")}).catch(a=>{})}},created(){this.index()}},O=d(" Name "),G=d(" Description "),H=d(" Image "),K=["disabled"],Q=d(" Add "),X={key:0,class:"spinner-border text-warning",role:"status"},Y=t("span",{class:"visually-hidden"},"Loading...",-1),Z=[Y],$={class:"table table-bordered"},ee=t("thead",null,[t("tr",null,[t("th",null,"#"),t("th",null,"Image"),t("th",null,"Name"),t("th",null,"Description"),t("th",null,"Action")])],-1),te=["src"],se=["onClick"];function oe(o,e,s,a,l,u){return i(),r(k,null,[t("form",{onSubmit:e[3]||(e[3]=W(n=>u.add(),["prevent"])),class:"p-3 alert-secondary",style:{"max-width":"500px"}},[O,N(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=n=>l.form.name=n),class:"form-control mb-1"},null,512),[[w,l.form.name]]),G,N(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=n=>l.form.description=n),class:"form-control mb-1"},null,512),[[w,l.form.description]]),H,t("input",{type:"file",onChange:e[2]||(e[2]=n=>{l.form.fileName=n.target.files[0]}),accept:"image/*",class:"form-control mb-3",required:""},null,32),t("button",{disabled:l.d,type:"supmit",class:"btn btn-success"},[Q,l.d?(i(),r("div",X,Z)):M("",!0)],8,K)],32),t("table",$,[ee,t("tbody",null,[(i(!0),r(k,null,z(l.products,(n,v)=>(i(),r("tr",{key:v},[t("td",null,[t("img",{src:n.url,alt:"",style:{height:"100px"}},null,8,te)]),t("td",null,m(n.name),1),t("td",null,m(n.description),1),t("td",null,m(n.imageName),1),t("td",null,[t("button",{onClick:ne=>u.deleteProduct(n.id,n.fileName)},"Delete",8,se)])]))),128))])])],64)}var re=S(J,[["render",oe]]);export{re as default};
